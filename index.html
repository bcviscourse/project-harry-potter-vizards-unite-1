<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Home</title>

	<!-- Load CSS files -->
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
	<!-- <link rel="stylesheet" href="css/style.css"> -->
	<link rel="stylesheet" href="css/fontawesome.min.css">
	<link rel="stylesheet" href="css/milligram.min.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/graphic.css">
	<script type="module" src="js/main.js"></script>
	<!-- <script type="text/javascript" src = "js/scatter_chart.js"></script> -->
</head>
<body>
	<script type="module" src="js/main.js"></script>
	<!-- <script type="text/javascript" src = "js/scatter_chart.js"></script> -->

	<div class="header">
		<div class = "center">Final Project</div>
		<div class = "center">Edward Cramer, Helen Nazarenko, Michelle Youn, & Linda Chen</div>
		<br>
		<h1 class = "center"><b>Cryptocurrency</b></h1>
	</div>

	<div class="secondcontainer">
		<!-- below is the option to select data by year: -->
			<div class="user-control">
					
            </div>
		<!-- tooltip: -->
		<p id="tooltip"></p>

		<div class="row">
			<div class="column">
				
				<!-- Visualization placeholders -->
				<div id="stacked-area-chart"></div>
				<!-- <div id="timeline"></div> -->
			
			</div>
			<div class="column" id="map">
				<div id="timeline"></div>
			</div>
		</div>

	</div>

	<div class='library'>
			<h2 class='library__hed'><a target='_blank' href='https://github.com/sjwilliams/scrollstory'>ScrollStory</a></h2>
			<div class='library__graphic graphic'>
				<div class='graphic__prose'>
					<p class='trigger' data-step='0'>Step 1 in the graphic. It triggers in the middle of the viewport. For this graphic, it is the same as the initial state so the reader doesn&rsquo;t miss anything.</p>
					<p class='trigger' data-step='1'>Step 2 arrives. The graphic should be locking into a fixed position right about now. We could have a whole bunch of these &ldquo;fixed&rdquo; steps.</p>
					<p class='trigger' data-step='2'>Step 3 concludes our brief tour. The graphic should now go back to its original in-flow position, elegantly snapping back into place.</p>
				</div>
				<div class='graphic__vis'></div>
			</div>
			<p class='back-to-blog'><a href='../../#scrollstory'>&larr; Back to the blog</a></p>
	</div>

	<!-- Load JS libraries: D3 -->
	<script src="js/d3.min.js"></script>

	<!-- Your implementation -->
	<script src="js/main.js"></script>

	<!-- The scroll library -->
	<!-- https://github.com/sjwilliams/scrollstory -->
	<script src='js/jquery-3.1.1.min.js'></script>
	<script src='js/jquery-scrollstory.min.js'></script>

	<script>
		(function() {

			function scrollstory() {
				// select elements using jQuery since it is a dependency
				var $graphicEl = $('.graphic')
				var $graphicVisEl = $graphicEl.find('.graphic__vis')

				// viewport height
				var viewportHeight = window.innerHeight
				var halfViewportHeight = Math.floor(viewportHeight / 2)

				// a global function creates and handles all the vis + updates
				var graphic = createGraphic('.graphic')

				// handle the fixed/static position of grahpic
				var toggle = function(fixed, bottom) {
					if (fixed) $graphicVisEl.addClass('is-fixed')
					else $graphicVisEl.removeClass('is-fixed')

					if (bottom) $graphicVisEl.addClass('is-bottom')
					else $graphicVisEl.removeClass('is-bottom')
				}

				// callback function when scrollStory detects item to trigger
				var handleItemFocus = function(event, item) {
					var step = item.data.step
					graphic.update(step)
				}	

				// callback on scrollStory scroll event
				// toggle fixed position
				var handleContainerScroll = function(event) {
					var bottom = false
					var fixed = false

					var bb = $graphicEl[0].getBoundingClientRect()
					var bottomFromTop = bb.bottom - viewportHeight

					if (bb.top < 0 && bottomFromTop > 0) {
						bottom = false
						fixed = true
					} else if (bb.top < 0 && bottomFromTop < 0) {
						bottom = true
						fixed = false
					}

					toggle(fixed, bottom)
				}

				// instantiate scrollStory
				$graphicEl.scrollStory({
					contentSelector: '.trigger',
					triggerOffset: halfViewportHeight,
					itemfocus: handleItemFocus,
					containerscroll: handleContainerScroll,
				})
			}

			scrollstory()

		})()
	</script>

</body>
</html>