<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Home</title>

	<!-- Load CSS files -->
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
	<!-- <link rel="stylesheet" href="css/style.css"> -->
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="css/fontawesome.min.css">
	<link rel="stylesheet" href="css/milligram.min.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/fade.css">
	<link rel="stylesheet" href="css/graphic.css">
	<script type="module" src="js/main.js"></script>
	<!-- <script type="text/javascript" src = "js/scatter_chart.js"></script> -->

	<!-- Fonts and scripts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab&display=swap" rel="stylesheet">

<body>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="jquery.js"></script>
	<script src="fadein.js"></script>
	<script type="module" src="js/fade.js"></script>
	<script type="module" src="js/main.js"></script>
	<!-- <script type="text/javascript" src = "js/scatter_chart.js"></script> -->

	<div class=" center header">
		<div class="center title">Final Project: Cryptocurrency</div>
		<div class="center names">Edward Cramer, Helen Nazarenko, Michelle Youn, & Linda Chen</div>
		<br>
	</div>

	<div class="balloon_container">
		<div class="balloon"></div>
	</div>

	<div class='library'>

		<!-- <h2 class='library__hed'><a target='_blank' href='https://github.com/sjwilliams/scrollstory'>ScrollStory</a></h2> -->

		<div class='library__graphic graphic'>
			<div class='graphic__prose'>

				<!-- Section 1 -->
				<section>
					<p class='trigger' data-step='0'>
						<br>
						<br> Step 0:
						<br> We show a single circle representing the nature of centralized currency.
					</p>
				</section>

				<!-- Section 2 -->
				<section>
					<p class='trigger' data-step='1'>
						<br>
						<br> Step 1:
						<br> The bubble pops, and splits into circles representing different cryptocurrencies.
						<br> They lay out horizontally along a timeline.
					</p>
				</section>

				<!-- Section 3 -->
				<section>
					<p class='trigger' data-step='2'>
						<br>
						<br> Step 2:
						<br> The bubbles change color to show different hashing algorithms.
						<br>
					</p>
				</section>

				<section>
					<p class='trigger' data-step='3'>
						<br>
						<br> Step 3:
						<br> The bubbles grow in size to represent market cap.
						<br>
					</p>

				</section>

				<section>
					<p class='trigger' data-step='4'>
					<br>
					<br> Step 4:
					<br> The colors turn neutral to show the shift from an engineering approach to a financial one.
					<br>
				</section>

				<section>
					<br>
					<br> Next: Dynamic dataset to visualize real time changes
					<br>
				</section>



			</div>
			<div class='graphic__vis'></div>

			<div class="footer">
				Thank you.
			</div>

		</div>

		<!-- <p class='back-to-blog'><a href='../../#scrollstory'>&larr; Scrollstory Blog</a></p> -->
	</div>

	<!-- Load JS libraries: D3 -->
	<script src="js/d3.min.js"></script>

	<!-- Your implementation -->
	<script src="js/main.js"></script>

	<!-- The scroll library -->
	<!-- https://github.com/sjwilliams/scrollstory -->
	<script src='js/jquery-3.1.1.min.js'></script>
	<script src='js/jquery-scrollstory.min.js'></script>

	<script>
		(function () {

			function scrollstory() {
				Promise.all([
					d3.csv('data/out.csv')
					// d3.csv('data/mining_algorithms.csv')
				]).then(data => {
					let miningData = data[0]
					console.log(miningData);
					var TOTDATA =[];
					let i=0;
					//formatting the data:
					let count=0;
					for (i=0;i<miningData.length;i++){
						if (miningData[i].name2 !='' ){
							TOTDATA[count] = {name: miningData[i].name,
											symbol: miningData[i].symbol,
											algo: miningData[i].algo,
											year: +miningData[i].year,
											marketcap: +miningData[i].marketcap,
											circulatingsupply: + miningData[i].circulatingsupply,
											price: +miningData[i].price};
							count++;
						}
					}
					// miningData.filter(entry => entry.year != 0 && entry.year != "");
					// let smallMine = miningData.slice(1, 20)
					setScrollStory(TOTDATA)
				})

				function setScrollStory(data) {
					// select elements using jQuery since it is a dependency
					var $graphicEl = $('.graphic')
					var $graphicVisEl = $graphicEl.find('.graphic__vis')

					// viewport height
					var viewportHeight = window.innerHeight
					var halfViewportHeight = Math.floor(viewportHeight / 2)

					// a global function creates and handles all the vis + updates
					console.log(data)
					var graphic = createGraphic('.graphic', data)

					// handle the fixed/static position of grahpic
					var toggle = function (fixed, bottom) {
						if (fixed) $graphicVisEl.addClass('is-fixed')
						else $graphicVisEl.removeClass('is-fixed')

						if (bottom) $graphicVisEl.addClass('is-bottom')
						else $graphicVisEl.removeClass('is-bottom')
					}

					// callback function when scrollStory detects item to trigger
					var handleItemFocus = function (event, item) {
						var step = item.data.step
						graphic.update(step)
						console.log('STEP:',step)
					}

					// callback on scrollStory scroll event
					// toggle fixed position
					var handleContainerScroll = function (event) {
						var bottom = false
						var fixed = false

						var bb = $graphicEl[0].getBoundingClientRect()
						var bottomFromTop = bb.bottom - viewportHeight

						if (bb.top < 0 && bottomFromTop > 0) {
							bottom = false
							fixed = true
						} else if (bb.top < 0 && bottomFromTop < 0) {
							bottom = true
							fixed = false
						}

						toggle(fixed, bottom)
					}

					// instantiate scrollStory
					$graphicEl.scrollStory({
						contentSelector: '.trigger',
						triggerOffset: halfViewportHeight,
						itemfocus: handleItemFocus,
						containerscroll: handleContainerScroll,
					})
				}
			}

			scrollstory()

		})()
	</script>
</body>

</html>